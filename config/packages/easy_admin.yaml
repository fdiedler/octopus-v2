easy_admin:
    site_name: 'WeHost'
    design:
        brand_color: '#4eb980'
        templates:
            layout: "easy_admin/layout.html.twig"
        assets:
            css:
                - '/css/style.css'
                - '/css/menu.css'
    
    list:
        max_results: 100
                
        actions:
            - { name: 'show', icon: 'search' }
            - { name: 'edit', icon: 'pencil' }
    # http://symfony.com/doc/current/bundles/EasyAdminBundle/book/list-search-show-configuration.html
    # http://symfony.com/doc/current/bundles/EasyAdminBundle/book/edit-new-configuration.html
    entities:
        Checker:
            class: App\Entity\Checker
            disabled_actions: [ 'show' ]
            
            controller: App\EasyAdmin\CheckerController
            
            new:
                fields:
                    - { property: 'name', label: 'Name' }  
                    - { property: 'market', label: 'Market' }
                    - { property: 'amountWithoutTaxes', label: 'Checkin fee (HT)', type: 'money', type_options: { currency: 'EUR', divisor: 100 } }
                    - { property: 'user', type: 'hidden' } # bug with this field... need to hide it manually
                    
            form:
                fields:
                    - { property: 'name', label: 'Name' }
                    - market
                    - { property: 'amountWithoutTaxes', label: 'Cost (HT)', type: 'money', type_options: { currency: 'EUR', divisor: 100 } }
                    - { property: 'user', help: 'If you don''t find the right email, contact the administrator at florent@wehost.fr' }
                    
        Checkin:
            class: App\Entity\Checkin
            disabled_actions: [ 'show' ]
            
            controller: App\EasyAdmin\CheckinController
            
            templates:
                list: 'easy_admin/noNewButton.html.twig' # disable "new" button 
                edit: 'easy_admin/editCheckin.html.twig'
                new: 'easy_admin/newCheckin.html.twig'
                
            form:
                fields:
                    - { property: 'property', label: 'Property', type: text, type_options: {disabled: true } }  
                    #- { property: 'reservation', label: 'Reservation', type_options: {disabled: false, required: true} }  
                    - { property: 'checker', label: 'Assigned to' }
                    - { property: 'date', label: 'Checkin date' }
                    - { property: 'time', label: 'Time' }
                    - { property: 'amountWithoutTaxes', label: 'Cost (HT)', type: 'money', type_options: { currency: 'EUR', divisor: 100 } }
                    - comments
            
            list:
                fields:
                    - { property: 'reservation.property', label: 'Property' }  
                    - { property: 'checker', label: 'Assigned to' }
                    - { property: 'date', label: 'Checkin date' }
                    
        CleaningPresta:
            class: App\Entity\CleaningPresta
            disabled_actions: [ 'show' ]
            
            controller: App\EasyAdmin\CleaningPrestaController
            
            new:
                fields:
                    - { property: 'name', label: 'Name' }  
                    - { property: 'user', help: 'If you don''t find the right email, contact the administrator at florent@wehost.fr' }
                    - { property: 'market', label: 'Market' }
            form:
                fields:
                    - { property: 'name', label: 'Name' }
                    - { property: 'user', help: 'If you don''t find the right email, contact the administrator at florent@wehost.fr' }
                    
                    
        Cleaning:
            class: App\Entity\Cleaning
            disabled_actions: [ 'show' ]
            
            controller: App\EasyAdmin\CleaningController
            
            templates:
                list: 'easy_admin/noNewButton.html.twig' # disable "new" button 
                edit: 'easy_admin/editCleaning.html.twig'
                new: 'easy_admin/newCleaning.html.twig'
                
            form:
                fields:
                    - { property: 'property', label: 'Property' }  
                    - { property: 'reservation', label: 'Reservation', type_options: {disabled: false} }  
                    - { property: 'presta', label: 'Assigned to' }  
                    - type
                    - { property: 'amountWithoutTaxes', label: 'Amount without taxes', type: 'money', type_options: { currency: 'EUR', divisor: 100 } }
                    - { property: 'date', type_options: {required: true} }
                    - comments
            list:
                fields:
                    - { property: 'property', label: 'Property' }  
                    - reservation
                    - { property: 'date', label: 'Date' }  
                    - { property: 'correlType', type: string, label: 'Type' } 
                    - { property: 'amountWithoutTaxes', label: 'HT Amount' }  
                    - { property: 'comments', label: 'Description' }  
            
        Cron:
            class: App\Entity\Cron
            disabled_actions: [ 'new', 'delete' ]
            
            show:
                fields:
                    - { property: 'name', label: 'Job name' }
                    - { property: 'startDate', label: 'Start datetime' }
                    - { property: 'endDate', label: 'Finish datetime' }
                    - { property: 'finished', type: boolean, label: 'Finished' }  
                    - { property: 'details', label: 'Details' }  
                    
            list:
                fields:
                    - { property: 'name', label: 'Job name' }
                    - { property: 'startDate', label: 'Start datetime' }
                    - { property: 'endDate', label: 'Finish datetime' }
                    - { property: 'finished', type: boolean, label: 'Finished' }  
                    
            form:
                fields:
                    - { property: 'name', label: 'Job name' }
                    - { property: 'finished',  label: 'Finished' }  
                   
        ImportPrice:
            class: App\Entity\Reservation
            disabled_actions: [ 'show' ]
            templates:
                list: 'easy_admin/listPriceManaged.html.twig'
            
            controller: App\EasyAdmin\ImportPriceController
            
            new:
                fields:
                    - { property: 'property', type_options: { required: true } }
                    - checkinDate
                    - checkoutDate
                    - guestName
                    - { property: 'hostProfitAmount', label: 'Host Profit', type: 'money', type_options: { currency: 'EUR', divisor: 100 } }
                    - { property: 'guestCleaningFeeAmount', label: 'Cleaning Fee charged to Guest', type: 'money', type_options: { currency: 'EUR', divisor: 100 } }
                    
            list:
                actions:
                    #- { name: 'cleaning_add', icon: 'plus', label: 'Add cleaning', type: 'route' }
                    - { name: 'change_status', icon: 'eye-slash', label: 'Hide', type: 'route' }
            
                fields:
                    - { property: 'property.market', label: 'City' }
                    - property
                    - checkinDate
                    - checkoutDate
                    - { property: 'hostProfitAmount', label: 'Host Profit', template: 'easy_admin/money.html.twig' }
                    - { property: 'discountAmount', label: 'Discount from AirBNB', template: 'easy_admin/money.html.twig'  }
                    - { property: 'guestCleaningFeeAmount', label: 'Guest Cleaning Fee', template: 'easy_admin/money.html.twig' }
                    - { property: 'managed', type: boolean }  
            
            edit:
                fields:
                    - { property: airbnbId, type_options: { disabled: true }}
                    - { property: guestName, type_options: { disabled: true }}
                    - checkinDate
                    - checkoutDate
                    - { property: 'hostProfitAmount', label: 'Host Profit', type: 'money', type_options: { currency: 'EUR', divisor: 100 } }
                    - { property: 'discountAmount', label: 'Discount from AirBNB', type: 'money', type_options: { currency: 'EUR', divisor: 100 } }
                    - { property: 'guestCleaningFeeAmount', label: 'Cleaning Fee charged to Guest', type: 'money', type_options: { currency: 'EUR', divisor: 100 } }
                    - { property: 'canceled', type: checkbox, label: 'Cancel reservation' }  
                    
        Host:
            class: App\Entity\Host
            disabled_actions: [ 'show' ]
            templates:
                list: 'easy_admin/listManagedHost.html.twig'
            list:
                sort: ['name', 'ASC']
                fields:
                    - { property: 'name', label: 'Name' }
                    - { property: 'email', label: 'Email' }
                    - { property: 'wehostEmailAlias', label: 'Airbnb Login' }
                    - { property: 'airbnbPassword', label: 'Airbnb Password' }
                    #- { property: 'birthdate', label: 'Date of birth' }
                    - { property: 'currentlyManaged', type: boolean }
                    - { property: 'properties' }
                actions:
                    - { name: 'view_properties', icon: 'home', label: 'Properties', type: 'route' }
                    
            form:
                fields:
                    - { type: 'group',  label: 'Basic information' }
                    - 'name'
                    - 'email'
                    - { property: 'wehostEmailAlias', label: 'Airbnb Login (@wehost.fr alias)' }
                    - { property: 'airbnbPassword', label: 'Airbnb Password' }
                    - { property: 'birthdate', label: 'Date of birth', type_options: { widget: 'single_text' } }
                    
        Property:
            class: App\Entity\Property
            disabled_actions: [ 'show' ]
            controller: App\EasyAdmin\PropertyController
            
            templates:
                list: 'easy_admin/listManagedProperty.html.twig'
            list:
                sort: ['label', 'ASC']
                fields:
                    - { property: 'label', label: 'Description' }
                    - { property: 'host', label: 'Host' }
                    - { property: 'market', label: 'Market' }
                    - { property: 'nbNights', label: 'Nuits lou√©es par an' }
                    - { property: 'currentlyManaged', type: boolean }
                actions:
                    # Remove reservation per property (currently not used) 
                    #- { name: 'view_reservations', icon: 'clock-o', label: 'Reservations', type: 'route' }
                    - { name: 'cleaning_add_property', icon: 'plus', label: 'Add cleaning', type: 'route' }
                    
            form:
                fields:
                    - { type: 'group',  label: 'Basic information' }
                    - 'host'
                    - 'market'
                    - 'label'
                    - accessFormUrl
                    - { property: 'defaultCleaningPresta', label: 'Default cleaning presta' }
                    - { property: 'managedPeriods', type: '\App\Form\Type\TimePeriodsType', label: 'Periods where the property is managed by WeHost' }
                    - { type: 'group', label: 'AirBNB information' }
                    - { property: 'airbnbCalendarUrl', label: 'Airbnb iCal' }
                    - { property: 'airbnbId', label: 'Airbnb Room ID' }
                    - { type: 'group', label: 'Contract information' }
                    - { property: 'type' }
                    - { property: 'wehostPercentage', label: 'WeHost Percentage (without % sign)' }
                    - { property: 'minCommissionAmount', label: 'Minimum commission (HT)', type: 'money', type_options: { currency: 'EUR', divisor: 100 } }
                    - { property: 'minReservationAmount', label: 'Minimum reservation', type: 'money', type_options: { currency: 'EUR', divisor: 100 } }
                    - { type: 'group', label: 'Cleaning information' }
                    - { property: 'defaultGuestCleaningFeeAmount', label: 'Guest Cleaning Fee', type: 'money', type_options: { currency: 'EUR', divisor: 100 } }
                    - { property: 'cleaningFeeAmount', label: 'Cleaning Fee (without taxes)', type: 'money', type_options: { currency: 'EUR', divisor: 100 } }
                    - { property: 'deepCleaningFeeAmount', label: 'Deep Cleaning Fee (without taxes)', type: 'money', type_options: { currency: 'EUR', divisor: 100 } }
                    - { property: 'beddingFeeAmount', label: 'Bedding Fee (without taxes)', type: 'money', type_options: { currency: 'EUR', divisor: 100 } }
                    - { property: 'cleaningFeeAmountWithoutBedding', label: 'Cleaning without bedding Fee (without taxes)', type: 'money', type_options: { currency: 'EUR', divisor: 100 } }
                    
        ExtraCharge:
            class: App\Entity\ExtraCharge
            controller: App\EasyAdmin\ExtrachargeController
            help: 'Enter a negative amount to make a commercial gesture'
            
            list:
                fields:
                    - 'id'
                    - 'property'
                    - 'date'
                    - 'label'
                    - { property: 'amountWithTaxes', label: 'Amount' }
            form:
                fields:
                    - 'property'
                    - 'date'
                    - 'label'
                    - { property: 'amountWithoutTaxes', label: 'Amount (without taxes)', type: 'money', type_options: { currency: 'EUR', divisor: 100 } }
                    - { property: 'taxesAmount', label: 'Taxes', type: 'money', type_options: { currency: 'EUR', divisor: 100 } }
                    - 'comments'
          
        Market:
            class: App\Entity\Market
            disabled_actions: [ 'show' ]
            list:
                actions:
                    - { name: 'market_objectives', icon: 'plus', label: 'Objectives', type: 'route' }
                    
                fields:
                    - name
                    - manager
                    - managerPercentage
            form:
                fields:
                    - name
                    - manager
                    - managerPercentage

        Reservation:
            class: App\Entity\Reservation
            disabled_actions: [ 'show', 'new' ]
            list:
                fields:
                    - property
                    - airbnbId
                    - checkinDate
                    - checkoutDate
                    - guestName
                    - { property: 'managed', type: boolean }
            form:
                fields:
                    #- checkinDate
                    #- checkoutDate
                    - { property: airbnbId, type_options: { disabled: true }}
                    - { property: guestName, type_options: { disabled: true }}
                    #- status
                    - { property: 'hostProfitAmount', label: 'Host Profit', type: 'money', type_options: { currency: 'EUR', divisor: 100 } }
                    - { property: 'guestCleaningFeeAmount', label: 'Cleaning Fee charged to Guest', type: 'money', type_options: { currency: 'EUR', divisor: 100 } }
                    #- lastSuccessfulAirbnbPricingSyncDate

        User:
            class: App\Entity\User
            disabled_actions: [ 'show' ]
            controller: App\EasyAdmin\UserController
            
            templates:
                list: 'easy_admin/listManagedUser.html.twig'
             
            new:
                fields:
                    - email
                    - roles
                    - allowedMarketId
            list:
                title: 'All available users'
              
                sort: ['email', 'ASC']

                actions:
                    # Allow admin users to log as any regular user
                    - { name: 'change_user_logged', icon: 'user', label: 'Logged as', type: 'route' }
            
                fields:
                    - email
                    - roles
                    - { property: 'allowedMarketId', label: 'Belongs to' }
                    - enabled
                    